(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87528,e=>{"use strict";e.s(["default",()=>n]);var s=e.i(43476),t=e.i(71645),r=e.i(18566),o=e.i(22016),l=e.i(57688);function n(){let e=(0,r.useSearchParams)(),n=e.get("userId")||"1234",a=e.get("documentId")||"demo123",[i,c]=(0,t.useState)(null),[d,m]=(0,t.useState)({}),[x,u]=(0,t.useState)(!1),[g,h]=(0,t.useState)(!1),[p,b]=(0,t.useState)(null),[f,j]=(0,t.useState)(!1),v=(0,t.useCallback)(async()=>{u(!0);try{console.log("Fetching questions for userId: ".concat(n));let e="https://api.allorigins.win/raw?url=".concat(encodeURIComponent("http://72.60.41.227:5000/get_mcqs/".concat(n)));console.log("🌐 Using CORS proxy for get_mcqs:",e);let s=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("API Response status: ".concat(s.status)),s.ok){let e=await s.json();if(console.log("API Response data:",e),Array.isArray(e)&&e.length>0){let s=e[0];console.log("First test data:",s),c({questions:s.questions||[]}),u(!1);return}c(e),u(!1);return}console.warn("API returned ".concat(s.status," - falling back to demo mode"))}catch(e){console.error("Failed to fetch questions:",e),console.log("🌐 API unavailable - running in Demo Mode with sample questions")}j(!0),c({questions:[{question:"I feel confident expressing my ideas in a group setting.",question_no:1,options:[{score:5,text:"Strongly Agree"},{score:4,text:"Agree"},{score:3,text:"Neutral"},{score:2,text:"Disagree"},{score:1,text:"Strongly Disagree"}]},{question:"I enjoy working with others to solve complex problems.",question_no:2,options:[{score:5,text:"Strongly Agree"},{score:4,text:"Agree"},{score:3,text:"Neutral"},{score:2,text:"Disagree"},{score:1,text:"Strongly Disagree"}]},{question:"I can easily adapt to new situations and challenges.",question_no:3,options:[{score:5,text:"Strongly Agree"},{score:4,text:"Agree"},{score:3,text:"Neutral"},{score:2,text:"Disagree"},{score:1,text:"Strongly Disagree"}]},{question:"I am comfortable taking initiative in team projects.",question_no:4,options:[{score:5,text:"Strongly Agree"},{score:4,text:"Agree"},{score:3,text:"Neutral"},{score:2,text:"Disagree"},{score:1,text:"Strongly Disagree"}]},{question:"I prefer to work independently rather than in groups.",question_no:5,options:[{score:1,text:"Strongly Agree"},{score:2,text:"Agree"},{score:3,text:"Neutral"},{score:4,text:"Disagree"},{score:5,text:"Strongly Disagree"}]}]}),u(!1)},[n]);(0,t.useEffect)(()=>{v()},[v]);let w=async()=>{h(!0),b(null);try{let e="https://api.allorigins.win/raw?url=".concat(encodeURIComponent("http://72.60.41.227:5000/submit_answers"));console.log("🌐 Using CORS proxy for submit_answers:",e);let s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n,answers:d})});if(s.ok){let e=await s.json();console.log("✅ Submit answers API response:",e),localStorage.setItem("testResults_".concat(n),JSON.stringify(e)),b({success:!0,message:e.message||"Answers submitted successfully!"}),setTimeout(()=>{window.location.href="/test-results?userId=".concat(n)},2e3)}else throw Error("API Error: ".concat(s.status))}catch(e){console.error("Failed to submit answers:",e),localStorage.setItem("testResults_".concat(n),JSON.stringify({analysis:{Communication:"Strong",Leadership:"Moderate","Problem Solving":"Excellent",Teamwork:"Good"},max_score:100,percentage:85,total_score:85,trait_scores:{Communication:{score:22,max_score:25,percentage:88},Leadership:{score:18,max_score:25,percentage:72},"Problem Solving":{score:24,max_score:25,percentage:96},Teamwork:{score:21,max_score:25,percentage:84}},message:"Great job! You show strong communication and excellent problem-solving skills. (Demo Mode)"})),b({success:!0,message:"Answers submitted successfully! (Demo Mode)"}),setTimeout(()=>{window.location.href="/test-results?userId=".concat(n)},2e3)}finally{h(!1)}};return x?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto"}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Loading Test Questions"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Fetching your personalized questions from the API..."}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 space-y-1",children:[(0,s.jsx)("p",{children:"• Connecting to assessment server"}),(0,s.jsx)("p",{children:"• Retrieving question bank"}),(0,s.jsx)("p",{children:"• Preparing your test"})]})]})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 py-8",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"bg-white shadow-2xl rounded-2xl p-8 border border-gray-100",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center mb-3",children:[(0,s.jsx)(l.default,{src:"/site-logo.png",alt:"Candidate Finder Logo",width:48,height:48,className:"h-12 w-auto mr-4"}),(0,s.jsxs)("div",{className:"flex flex-col mr-4",children:[(0,s.jsx)("span",{className:"text-sm text-blue-500 font-medium leading-none",children:"CANDIDATE FINDER"}),(0,s.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"📝 Take Test"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"User ID:"," ",(0,s.jsx)("span",{className:"font-semibold ml-1",children:n})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Document ID:"," ",(0,s.jsx)("span",{className:"font-semibold ml-1",children:a})]}),f&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),(0,s.jsx)("span",{className:"text-yellow-600 font-semibold",children:"Demo Mode"})]})]})]}),(0,s.jsx)(o.default,{href:"/test-generate",className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-200 shadow-lg hover:shadow-xl",children:"← Back to Generate"})]})}),i&&i.questions&&(0,s.jsxs)("div",{className:"space-y-8",children:[i.questions.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gradient-to-r from-white to-blue-50 border border-blue-200 rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4",children:e.question_no||t+1}),(0,s.jsxs)("h3",{className:"text-xl font-semibold text-gray-800",children:["Question ",e.question_no||t+1]})]}),(0,s.jsx)("p",{className:"text-lg text-gray-700 leading-relaxed pl-14",children:e.question||"Please select your response:"})]}),(0,s.jsx)("div",{className:"space-y-3 pl-14",children:e.options.map((e,r)=>(0,s.jsxs)("label",{className:"flex items-center p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 hover:scale-[1.02] ".concat(d[t.toString()]===e.text?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-blue-25"),children:[(0,s.jsx)("input",{type:"radio",name:"question-".concat(t),value:e.text,checked:d[t.toString()]===e.text,onChange:e=>{var s;return s=e.target.value,void m(e=>({...e,[t.toString()]:s}))},className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,s.jsxs)("div",{className:"ml-4 flex-1",children:[(0,s.jsx)("span",{className:"text-gray-800 font-medium",children:e.text}),(0,s.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["(Score: ",e.score,")"]})]}),d[t.toString()]===e.text&&(0,s.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},r))})]},t)),(0,s.jsx)("div",{className:"mt-12 bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-8 border border-green-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-lg",children:Object.keys(d).length})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:"Progress"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[Object.keys(d).length," of"," ",i.questions.length," questions answered"]})]})]}),(0,s.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-3",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-3 rounded-full transition-all duration-500",style:{width:"".concat(Object.keys(d).length/i.questions.length*100,"%")}})})]}),(0,s.jsx)("button",{onClick:w,disabled:!(i&&i.questions&&i.questions.every((e,s)=>d[s.toString()]))||g,className:"px-8 py-4 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:from-green-600 hover:to-blue-600 focus:outline-none focus:ring-4 focus:ring-green-300 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none",children:g?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Submitting..."]}):(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Submit Answers"]})})]})})]}),p&&(0,s.jsx)("div",{className:"mt-8 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-2xl p-8 shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"h-8 w-8 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})}),(0,s.jsxs)("div",{className:"ml-6",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-green-800 mb-2",children:"🎉 Answers Submitted Successfully!"}),(0,s.jsxs)("div",{className:"text-lg text-green-700",children:[(0,s.jsx)("p",{className:"font-medium",children:p.message}),(0,s.jsx)("p",{className:"text-sm text-green-600 mt-2",children:"Your responses have been recorded and will be processed shortly."})]})]})]})})]})})})}}]);