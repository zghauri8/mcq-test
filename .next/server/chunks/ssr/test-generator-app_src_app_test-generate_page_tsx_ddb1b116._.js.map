{"version":3,"sources":["turbopack:///[project]/test-generator-app/src/app/test-generate/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function TestGeneratePage() {\r\n  const [userId, setUserId] = useState(\"123456\");\r\n  const [trait, setTrait] = useState(\"Communication\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [result, setResult] = useState<{\r\n    document_id: string;\r\n    message: string;\r\n    questions: unknown[];\r\n  } | null>(null);\r\n\r\n  const generateTest = async () => {\r\n    setLoading(true);\r\n    setResult(null);\r\n\r\n    try {\r\n      // Using CORS proxy for generate_test API\r\n      const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(\r\n        \"http://72.60.41.227:5000/generate_test\"\r\n      )}`;\r\n      console.log(\"🌐 Using CORS proxy for generate_test:\", proxyUrl);\r\n\r\n      const response = await fetch(proxyUrl, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          user_id: userId,\r\n          trait: trait,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      // Check if response is actually JSON\r\n      const contentType = response.headers.get(\"content-type\");\r\n      console.log(\"📋 Generate Response content-type:\", contentType);\r\n\r\n      if (contentType && contentType.includes(\"application/json\")) {\r\n        const data = await response.json();\r\n        console.log(\"✅ Generate test API response:\", data);\r\n        setResult(data);\r\n      } else {\r\n        // Response is not JSON, probably HTML error page\r\n        const textResponse = await response.text();\r\n        console.log(\r\n          \"⚠️ Generate Non-JSON response received:\",\r\n          textResponse.substring(0, 200) + \"...\"\r\n        );\r\n        throw new Error(\r\n          \"Backend returned HTML instead of JSON - API endpoint may not exist or server error\"\r\n        );\r\n      }\r\n    } catch {\r\n      // Show mock success for demo\r\n      setResult({\r\n        document_id: \"demo_\" + Date.now(),\r\n        message: \"Test generated successfully (Demo Mode)\",\r\n        questions: [],\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 py-8\">\r\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"bg-white shadow-2xl rounded-2xl p-8 border border-gray-100\">\r\n          <div className=\"mb-8\">\r\n            <h1 className=\"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-3\">\r\n              🎯 Generate Test\r\n            </h1>\r\n            <p className=\"text-lg text-gray-600\">\r\n              Create a personalized assessment based on user ID and trait\r\n              selection\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\">\r\n            <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200\">\r\n              <label className=\"block text-lg font-semibold text-gray-800 mb-3\">\r\n                👤 User ID\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={userId}\r\n                onChange={(e) => setUserId(e.target.value)}\r\n                className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-4 focus:ring-blue-300 focus:border-blue-500 transition-all duration-200 text-lg\"\r\n                placeholder=\"Enter user ID\"\r\n              />\r\n              <p className=\"text-sm text-gray-600 mt-2\">\r\n                Unique identifier for the test taker\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 border border-green-200\">\r\n              <label className=\"block text-lg font-semibold text-gray-800 mb-3\">\r\n                🎭 Assessment Trait\r\n              </label>\r\n              <select\r\n                value={trait}\r\n                onChange={(e) => setTrait(e.target.value)}\r\n                className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-4 focus:ring-green-300 focus:border-green-500 transition-all duration-200 text-lg\"\r\n              >\r\n                <option value=\"Communication\">💬 Communication</option>\r\n                <option value=\"Leadership\">👑 Leadership</option>\r\n                <option value=\"Problem Solving\">🧩 Problem Solving</option>\r\n                <option value=\"Teamwork\">🤝 Teamwork</option>\r\n                <option value=\"Creativity\">🎨 Creativity</option>\r\n              </select>\r\n              <p className=\"text-sm text-gray-600 mt-2\">\r\n                Select the skill area to assess\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col sm:flex-row gap-4 mb-8\">\r\n            <button\r\n              onClick={generateTest}\r\n              disabled={loading}\r\n              className=\"px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:from-blue-600 hover:to-purple-600 focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none\"\r\n            >\r\n              {loading ? (\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></div>\r\n                  Generating Test...\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex items-center\">\r\n                  <svg\r\n                    className=\"w-5 h-5 mr-2\"\r\n                    fill=\"currentColor\"\r\n                    viewBox=\"0 0 20 20\"\r\n                  >\r\n                    <path\r\n                      fillRule=\"evenodd\"\r\n                      d=\"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z\"\r\n                      clipRule=\"evenodd\"\r\n                    />\r\n                  </svg>\r\n                  Generate Test\r\n                </div>\r\n              )}\r\n            </button>\r\n\r\n            {result && (\r\n              <Link\r\n                href={`/test-take?userId=${userId}&documentId=${result.document_id}`}\r\n                className=\"px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 focus:outline-none focus:ring-4 focus:ring-green-300 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105\"\r\n              >\r\n                <div className=\"flex items-center\">\r\n                  <svg\r\n                    className=\"w-5 h-5 mr-2\"\r\n                    fill=\"currentColor\"\r\n                    viewBox=\"0 0 20 20\"\r\n                  >\r\n                    <path\r\n                      fillRule=\"evenodd\"\r\n                      d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\r\n                      clipRule=\"evenodd\"\r\n                    />\r\n                  </svg>\r\n                  Take Test\r\n                </div>\r\n              </Link>\r\n            )}\r\n          </div>\r\n\r\n          {result && (\r\n            <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-2xl p-8 shadow-lg\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <div className=\"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center\">\r\n                    <svg\r\n                      className=\"h-8 w-8 text-white\"\r\n                      viewBox=\"0 0 20 20\"\r\n                      fill=\"currentColor\"\r\n                    >\r\n                      <path\r\n                        fillRule=\"evenodd\"\r\n                        d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\r\n                        clipRule=\"evenodd\"\r\n                      />\r\n                    </svg>\r\n                  </div>\r\n                </div>\r\n                <div className=\"ml-6\">\r\n                  <h3 className=\"text-2xl font-bold text-green-800 mb-2\">\r\n                    🎉 Test Generated Successfully!\r\n                  </h3>\r\n                  <div className=\"text-lg text-green-700 space-y-1\">\r\n                    <p>\r\n                      <span className=\"font-semibold\">Document ID:</span>{\" \"}\r\n                      {result.document_id}\r\n                    </p>\r\n                    <p>\r\n                      <span className=\"font-semibold\">Status:</span>{\" \"}\r\n                      {result.message}\r\n                    </p>\r\n                    <p className=\"text-sm text-green-600 mt-3\">\r\n                      Your personalized assessment is ready. Click &quot;Take\r\n                      Test&quot; to begin!\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}